<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§  Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø­ÙƒÙ…Ø© | Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„ÙÙƒØ±ÙŠØ©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --wisdom-primary: #9B59B6;
            --wisdom-secondary: #3498DB;
            --wisdom-dark: #2C3E50;
            --wisdom-bg: linear-gradient(135deg, #8360c3 0%, #2ebf91 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--wisdom-bg);
            min-height: 100vh;
            color: white;
            direction: rtl;
        }

        .kingdom-header {
            text-align: center;
            padding: 2rem;
            background: rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
        }

        .kingdom-title {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .kingdom-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: rgba(255,255,255,0.1);
            padding: 1rem 2rem;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 900;
            color: var(--wisdom-primary);
        }

        .game-arena {
            max-width: 900px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(0,0,0,0.2);
            border-radius: 20px;
            backdrop-filter: blur(15px);
        }

        .question-container {
            text-align: center;
            margin-bottom: 2rem;
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            padding: 1.5rem;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            line-height: 1.6;
        }

        .timer-display {
            font-size: 2rem;
            color: var(--wisdom-primary);
            margin: 1rem 0;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .start-btn {
            background: linear-gradient(45deg, #8360c3, #2ebf91);
            color: white;
        }

        .pause-btn {
            background: linear-gradient(45deg, #f093fb, #f5576c);
            color: white;
        }

        .answer-btn {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            color: white;
        }

        .back-btn {
            background: linear-gradient(45deg, #fa709a, #fee140);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .thinking-indicator {
            text-align: center;
            margin: 1rem 0;
            font-style: italic;
            color: var(--wisdom-primary);
        }

        .wisdom-quotes {
            background: rgba(155, 89, 182, 0.2);
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
            text-align: center;
            font-style: italic;
        }

        .difficulty-level {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .difficulty-star {
            color: var(--wisdom-primary);
            font-size: 1.5rem;
        }

        .achievements {
            background: rgba(0,0,0,0.3);
            padding: 1rem;
            border-radius: 15px;
            margin-top: 2rem;
        }

        .achievements h3 {
            text-align: center;
            margin-bottom: 1rem;
            color: var(--wisdom-primary);
        }

        .achievement-badge {
            display: inline-block;
            background: rgba(155, 89, 182, 0.3);
            padding: 0.5rem 1rem;
            margin: 0.5rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .progress-indicator {
            text-align: center;
            margin: 1rem 0;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 6px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--wisdom-primary), var(--wisdom-secondary));
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="kingdom-header">
        <div class="kingdom-title">ğŸ§  Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø­ÙƒÙ…Ø©</div>
        <p>ØªØ­Ø¯ÙŠØ§Øª ÙÙƒØ±ÙŠØ© Ø¹Ù…ÙŠÙ‚Ø© Ù„ØªØ·ÙˆÙŠØ± Ø§Ù„Ø°ÙƒØ§Ø¡ ÙˆØ§Ù„Ø¥Ø¨Ø¯Ø§Ø¹</p>
        
        <div class="kingdom-stats">
            <div class="stat-card">
                <div class="stat-number" id="totalChallenges">0</div>
                <div>Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="currentScore">0</div>
                <div>Ù†Ù‚Ø§Ø· Ø§Ù„Ø­ÙƒÙ…Ø©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="wisdomLevel">1</div>
                <div>Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­ÙƒÙ…Ø©</div>
            </div>
        </div>
    </div>

    <div class="game-arena">
        <div class="wisdom-quotes" id="wisdomQuote">
            "Ø§Ù„Ø­ÙƒÙ…Ø© Ù‡ÙŠ Ù…Ø¹Ø±ÙØ© Ù…Ø§ ÙŠØ¬Ø¨ ÙØ¹Ù„Ù‡ ØªØ§Ù„ÙŠØ§Ù‹"
        </div>

        <div class="question-container">
            <div class="difficulty-level" id="difficultyStars">
                â­â­â­
            </div>
            <div class="question-text" id="questionText">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ù…Ù„" Ù„Ø¨Ø¯Ø¡ Ø±Ø­Ù„Ø© Ø§Ù„Ø­ÙƒÙ…Ø©</div>
            <div class="timer-display" id="timerDisplay">60</div>
            
            <div class="thinking-indicator" id="thinkingTime">
                ÙˆÙ‚Øª Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ù…ØªØ§Ø­: <span id="thinkingTimer">60</span> Ø«Ø§Ù†ÙŠØ©
            </div>
            
            <div class="progress-indicator">
                <div>Ø§Ù„ØªÙ‚Ø¯Ù… ÙÙŠ Ø§Ù„Ø±Ø­Ù„Ø©: <span id="progressText">0/8</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="control-btn start-btn" onclick="startWisdomJourney()">ğŸ§˜ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ù…Ù„</button>
            <button class="control-btn pause-btn" onclick="pauseThinking()">â¸ï¸ ØªÙˆÙ‚Ù Ù„Ù„ØªÙÙƒÙŠØ±</button>
            <button class="control-btn answer-btn" onclick="shareWisdom()">ğŸ’¡ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø­ÙƒÙ…Ø©</button>
            <button class="control-btn back-btn" onclick="goBack()">ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ù…Ø§Ù„Ùƒ</button>
        </div>

        <div class="achievements">
            <h3>ğŸ† Ø¥Ù†Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø­ÙƒÙ…Ø©</h3>
            <div id="achievementsList">
                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ù€ JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø­ÙƒÙ…Ø©
        let wisdomData = {
            currentQuestion: 0,
            totalQuestions: 8,
            score: 0,
            timer: 60,
            isRunning: false,
            isPaused: false,
            completedChallenges: 0,
            wisdomLevel: 1,
            achievements: []
        };

        // Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø­ÙƒÙ…Ø© Ø§Ù„Ù…ØªØ¯Ø±Ø¬Ø© Ø§Ù„ØµØ¹ÙˆØ¨Ø©
        const wisdomQuestions = [
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙƒÙ„Ù…Ø§ Ø²Ø§Ø¯ Ù†Ù‚ØµØŸ",
                difficulty: 1,
                hint: "ÙÙƒØ± ÙÙŠ Ø´ÙŠØ¡ ÙŠØªÙ†Ø§Ù‚Øµ Ø¨Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…"
            },
            {
                question: "Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø¯ÙˆÙ† Ù…ÙØªØ§Ø­ØŒ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ùƒ ÙØªØ­Ù‡ØŸ",
                difficulty: 2,
                hint: "Ù„ÙŠØ³ ÙƒÙ„ Ù‚ÙÙ„ ÙŠØ­ØªØ§Ø¬ Ù…ÙØªØ§Ø­ Ù…Ø¹Ø¯Ù†ÙŠ"
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† ÙƒØ³Ø±Ù‡ Ø¨Ø¯ÙˆÙ† Ù„Ù…Ø³Ù‡ØŸ",
                difficulty: 2,
                hint: "Ø´ÙŠØ¡ Ù…Ø¹Ù†ÙˆÙŠ ÙˆÙ„ÙŠØ³ Ù…Ø§Ø¯ÙŠ"
            },
            {
                question: "Ø±Ø¬Ù„ ÙŠØ¹ÙŠØ´ ÙÙŠ Ø§Ù„Ø·Ø§Ø¨Ù‚ Ø§Ù„Ø¹Ø´Ø±ÙŠÙ†ØŒ ÙÙŠ Ø§Ù„ØµØ¨Ø§Ø­ ÙŠÙ†Ø²Ù„ Ø¨Ø§Ù„Ù…ØµØ¹Ø¯ØŒ ÙˆÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø¡ ÙŠØµØ¹Ø¯ Ù„Ù„Ø·Ø§Ø¨Ù‚ Ø§Ù„Ø³Ø§Ø¨Ø¹ Ø«Ù… ÙŠÙ…Ø´ÙŠ. Ù„Ù…Ø§Ø°Ø§ØŸ",
                difficulty: 3,
                hint: "ÙÙƒØ± ÙÙŠ Ù‚ÙŠÙˆØ¯ Ø¬Ø³Ø¯ÙŠØ© Ù…Ø¹ÙŠÙ†Ø©"
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠØ²Ø¯Ø§Ø¯ Ø¹Ù†Ø¯Ù…Ø§ ØªÙ‚Ø³Ù…Ù‡ØŸ",
                difficulty: 3,
                hint: "Ø´ÙŠØ¡ Ø±ÙŠØ§Ø¶ÙŠ"
            },
            {
                question: "Ù„Ø¯ÙŠÙƒ 12 ÙƒØ±Ø©ØŒ Ø¥Ø­Ø¯Ø§Ù‡Ø§ Ù…Ø®ØªÙ„ÙØ© Ø§Ù„ÙˆØ²Ù†. ÙƒÙŠÙ ØªØ¬Ø¯Ù‡Ø§ Ø¨Ø«Ù„Ø§Ø« Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙÙ‚Ø· Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙŠØ²Ø§Ù†ØŸ",
                difficulty: 4,
                hint: "Ù‚Ø³Ù… Ø§Ù„ÙƒØ±Ø§Øª Ø¥Ù„Ù‰ Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ù…ØªØ³Ø§ÙˆÙŠØ©"
            },
            {
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ³Ø§ÙØ± Ø­ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù… ÙˆÙ‡Ùˆ ÙÙŠ Ù…ÙƒØ§Ù†Ù‡ØŸ",
                difficulty: 3,
                hint: "Ø´ÙŠØ¡ ØªØ¬Ø¯Ù‡ ÙÙŠ Ø§Ù„Ø¨Ø±ÙŠØ¯"
            },
            {
                question: "Ø¥Ø°Ø§ ÙƒØ§Ù† ØºØ¯Ø§Ù‹ Ù‡Ùˆ Ø£Ù…Ø³ØŒ ÙÙ…Ø§Ø°Ø§ Ø³ÙŠÙƒÙˆÙ† Ø§Ù„ÙŠÙˆÙ…ØŸ",
                difficulty: 4,
                hint: "ÙÙƒØ± ÙÙŠ Ø§Ù„Ø²Ù…Ù† ÙˆØ§Ù„Ø£ÙŠØ§Ù…"
            }
        ];

        // Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„Ø­ÙƒÙ…Ø©
        const wisdomQuotes = [
            "Ø§Ù„Ø­ÙƒÙ…Ø© Ù‡ÙŠ Ù…Ø¹Ø±ÙØ© Ù…Ø§ ÙŠØ¬Ø¨ ÙØ¹Ù„Ù‡ ØªØ§Ù„ÙŠØ§Ù‹",
            "Ø§Ù„Ø¹Ù‚Ù„ Ø§Ù„Ø°ÙŠ ÙŠÙ†ÙØªØ­ Ù„ÙÙƒØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù† ÙŠØ¹ÙˆØ¯ Ø£Ø¨Ø¯Ø§Ù‹ Ø¥Ù„Ù‰ Ø­Ø¬Ù…Ù‡ Ø§Ù„Ø£ØµÙ„ÙŠ",
            "Ø§Ù„ØªØ¹Ù„Ù… Ù„Ø§ ÙŠÙ†ØªÙ‡ÙŠ Ø¥Ù„Ø§ Ø¨Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø­ÙŠØ§Ø©",
            "Ø§Ù„Ø­ÙƒÙŠÙ… ÙŠØªØ¹Ù„Ù… Ù…Ù† Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŒ ÙˆØ§Ù„ØºØ¨ÙŠ Ù„Ø§ ÙŠØªØ¹Ù„Ù… Ø­ØªÙ‰ Ù…Ù† Ø£Ø®Ø·Ø§Ø¦Ù‡",
            "Ø§Ù„Ù…Ø¹Ø±ÙØ© Ù‚ÙˆØ©ØŒ ÙˆØ§Ù„Ø­ÙƒÙ…Ø© Ù‡ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙˆØ© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­"
        ];

        let gameInterval;

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        function loadWisdomData() {
            const saved = localStorage.getItem('wisdom-kingdom-data');
            if (saved) {
                const data = JSON.parse(saved);
                wisdomData.completedChallenges = data.completedChallenges || 0;
                wisdomData.score = data.totalScore || 0;
                wisdomData.wisdomLevel = data.wisdomLevel || 1;
                wisdomData.achievements = data.achievements || [];
            }
            updateDisplay();
            showRandomQuote();
        }

        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveWisdomData() {
            const dataToSave = {
                completedChallenges: wisdomData.completedChallenges,
                totalScore: wisdomData.score,
                wisdomLevel: wisdomData.wisdomLevel,
                achievements: wisdomData.achievements,
                lastPlayed: new Date().toISOString()
            };
            localStorage.setItem('wisdom-kingdom-data', JSON.stringify(dataToSave));
        }

        // Ø¨Ø¯Ø¡ Ø±Ø­Ù„Ø© Ø§Ù„Ø­ÙƒÙ…Ø©
        function startWisdomJourney() {
            if (wisdomData.isRunning) return;
            
            wisdomData.isRunning = true;
            wisdomData.isPaused = false;
            wisdomData.currentQuestion = 0;
            wisdomData.timer = 60;
            
            playSound('start');
            showWisdomQuestion();
            startThinkingTimer();
            
            document.querySelector('.start-btn').textContent = 'ğŸ”„ Ø¨Ø¯Ø¡ Ø±Ø­Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©';
        }

        // Ø¥ÙŠÙ‚Ø§Ù Ù„Ù„ØªÙÙƒÙŠØ±
        function pauseThinking() {
            if (!wisdomData.isRunning) return;
            
            wisdomData.isPaused = !wisdomData.isPaused;
            
            if (wisdomData.isPaused) {
                clearInterval(gameInterval);
                document.querySelector('.pause-btn').textContent = 'â–¶ï¸ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªÙÙƒÙŠØ±';
                document.getElementById('thinkingTime').textContent = 'Ù…ØªÙˆÙ‚Ù Ù„Ù„ØªØ£Ù…Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ‚...';
                playSound('pause');
            } else {
                startThinkingTimer();
                document.querySelector('.pause-btn').textContent = 'â¸ï¸ ØªÙˆÙ‚Ù Ù„Ù„ØªÙÙƒÙŠØ±';
            }
        }

        // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø­ÙƒÙ…Ø© (Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©)
        function shareWisdom() {
            if (!wisdomData.isRunning || wisdomData.isPaused) return;
            
            const currentQ = wisdomQuestions[wisdomData.currentQuestion];
            const points = currentQ.difficulty * 15; // Ù†Ù‚Ø§Ø· Ø­Ø³Ø¨ Ø§Ù„ØµØ¹ÙˆØ¨Ø©
            
            wisdomData.score += points;
            wisdomData.currentQuestion++;
            
            playSound('success');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù…
            updateProgress();
            
            // Ø¥Ø¶Ø§ÙØ© Ø¥Ù†Ø¬Ø§Ø²
            addAchievement(`Ø­Ù„ Ù„ØºØ² Ø§Ù„Ø­ÙƒÙ…Ø© Ø±Ù‚Ù… ${wisdomData.currentQuestion}`);
            
            if (wisdomData.currentQuestion >= wisdomData.totalQuestions) {
                completeWisdomJourney();
            } else {
                showWisdomQuestion();
                wisdomData.timer = 60;
            }
            
            updateDisplay();
        }

        // Ø¹Ø±Ø¶ Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­ÙƒÙ…Ø©
        function showWisdomQuestion() {
            if (wisdomData.currentQuestion < wisdomQuestions.length) {
                const currentQ = wisdomQuestions[wisdomData.currentQuestion];
                document.getElementById('questionText').textContent = currentQ.question;
                
                // Ø¹Ø±Ø¶ Ù†Ø¬ÙˆÙ… Ø§Ù„ØµØ¹ÙˆØ¨Ø©
                const stars = 'â­'.repeat(currentQ.difficulty);
                document.getElementById('difficultyStars').textContent = stars;
                
                // Ø¹Ø±Ø¶ ØªÙ„Ù…ÙŠØ­ Ø¨Ø¹Ø¯ 30 Ø«Ø§Ù†ÙŠØ©
                setTimeout(() => {
                    if (wisdomData.isRunning && wisdomData.timer < 30) {
                        document.getElementById('questionText').innerHTML = 
                            currentQ.question + '<br><small style="color: #f39c12;">ğŸ’¡ ØªÙ„Ù…ÙŠØ­: ' + currentQ.hint + '</small>';
                    }
                }, 30000);
            }
        }

        // Ø¨Ø¯Ø¡ Ù…Ø¤Ù‚Øª Ø§Ù„ØªÙÙƒÙŠØ±
        function startThinkingTimer() {
            gameInterval = setInterval(() => {
                if (!wisdomData.isPaused) {
                    wisdomData.timer--;
                    document.getElementById('timerDisplay').textContent = wisdomData.timer;
                    document.getElementById('thinkingTimer').textContent = wisdomData.timer;
                    
                    if (wisdomData.timer <= 0) {
                        // Ø§Ù†ØªÙ‡Ù‰ ÙˆÙ‚Øª Ø§Ù„ØªÙÙƒÙŠØ±
                        wisdomData.currentQuestion++;
                        if (wisdomData.currentQuestion >= wisdomData.totalQuestions) {
                            completeWisdomJourney();
                        } else {
                            wisdomData.timer = 60;
                            showWisdomQuestion();
                        }
                    }
                }
            }, 1000);
        }

        // Ø¥ÙƒÙ…Ø§Ù„ Ø±Ø­Ù„Ø© Ø§Ù„Ø­ÙƒÙ…Ø©
        function completeWisdomJourney() {
            wisdomData.isRunning = false;
            clearInterval(gameInterval);
            
            // Ø­Ø³Ø§Ø¨ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­ÙƒÙ…Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯
            const newLevel = Math.floor(wisdomData.score / 100) + 1;
            if (newLevel > wisdomData.wisdomLevel) {
                wisdomData.wisdomLevel = newLevel;
                addAchievement(`ÙˆØµÙˆÙ„ Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­ÙƒÙ…Ø© ${newLevel}`);
            }
            
            wisdomData.completedChallenges++;
            saveWisdomData();
            
            document.getElementById('questionText').innerHTML = 
                `ğŸ‰ ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø£ÙƒÙ…Ù„Øª Ø±Ø­Ù„Ø© Ø§Ù„Ø­ÙƒÙ…Ø©!<br>
                Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…ÙƒØªØ³Ø¨Ø©: ${wisdomData.score}<br>
                Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­ÙƒÙ…Ø©: ${wisdomData.wisdomLevel}`;
            
            playSound('complete');
            showRandomQuote();
            updateDisplay();
            
            setTimeout(() => {
                wisdomData.currentQuestion = 0;
                wisdomData.timer = 60;
                document.getElementById('questionText').textContent = 'Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ù…Ù„" Ù„Ø¨Ø¯Ø¡ Ø±Ø­Ù„Ø© Ø§Ù„Ø­ÙƒÙ…Ø©';
                document.querySelector('.start-btn').textContent = 'ğŸ§˜ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ù…Ù„';
                showRandomQuote();
            }, 5000);
        }

        // Ø¹Ø±Ø¶ Ù‚ÙˆÙ„ Ø­ÙƒÙŠÙ… Ø¹Ø´ÙˆØ§Ø¦ÙŠ
        function showRandomQuote() {
            const randomQuote = wisdomQuotes[Math.floor(Math.random() * wisdomQuotes.length)];
            document.getElementById('wisdomQuote').textContent = randomQuote;
        }

        // Ø¥Ø¶Ø§ÙØ© Ø¥Ù†Ø¬Ø§Ø²
        function addAchievement(achievement) {
            if (!wisdomData.achievements.includes(achievement)) {
                wisdomData.achievements.push(achievement);
                displayAchievements();
            }
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
        function displayAchievements() {
            const container = document.getElementById('achievementsList');
            container.innerHTML = '';
            
            wisdomData.achievements.forEach(achievement => {
                const badge = document.createElement('div');
                badge.className = 'achievement-badge';
                badge.textContent = 'ğŸ† ' + achievement;
                container.appendChild(badge);
            });
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
        function updateDisplay() {
            document.getElementById('totalChallenges').textContent = wisdomData.completedChallenges;
            document.getElementById('currentScore').textContent = wisdomData.score;
            document.getElementById('wisdomLevel').textContent = wisdomData.wisdomLevel;
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø¯Ù…
        function updateProgress() {
            const progress = (wisdomData.currentQuestion / wisdomData.totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = 
                `${wisdomData.currentQuestion}/${wisdomData.totalQuestions}`;
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØµÙˆØ§Øª
        function playSound(type) {
            try {
                const audio = new Audio();
                switch(type) {
                    case 'start':
                        audio.src = '../assets/media/sounds/kingdom-sounds/mystic-wind.mp3';
                        break;
                    case 'success':
                        audio.src = '../assets/media/sounds/kingdom-sounds/knowledge-unlock.mp3';
                        break;
                    case 'complete':
                        audio.src = '../assets/media/sounds/kingdom-sounds/brain-activate.mp3';
                        break;
                    case 'pause':
                        audio.src = '../assets/media/sounds/Click.mp3';
                        break;
                }
                audio.play().catch(e => console.log('Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª'));
            } catch (e) {
                console.log('Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª');
            }
        }

        // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ù…Ø§Ù„Ùƒ
        function goBack() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ù…Ø§Ù„ÙƒØŸ Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø±Ø­Ù„ØªÙƒ ÙÙŠ Ø§Ù„Ø­ÙƒÙ…Ø©.')) {
                saveWisdomData();
                window.location.href = 'challenges-ultimate.html';
            }
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            loadWisdomData();
            displayAchievements();
            updateProgress();
            
            // ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ù‚ÙˆØ§Ù„ ÙƒÙ„ 10 Ø«ÙˆØ§Ù†
            setInterval(showRandomQuote, 10000);
        });
    </script>
</body>
</html>
